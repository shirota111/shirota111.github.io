<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Layered Canvas and Data Viewer</title>
    <style>
        canvas {
            border: 1px solid black;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            background-color: transparent; /* Canvas背景透明 */
        }

        #container {
            position: relative;
            width: 600px;
            height: 600px;
        }

        #dataWindow {
            position: absolute;
            top: 50px;
            left: 0;
            background-color: rgba(0, 0, 255, 0.3);
            padding: 20px;
            border-radius: 10px;
            width: 300px;
            height: 300px;
            z-index: 2;         
        }
    </style>
</head>
<body>

    <input type="number" id="unitInput" placeholder="ユニット番号を入力">
    <button id="placeUnitBtn">ユニット配置</button>

    <div id="container">
        <canvas id="myCanvas" width="600" height="600"></canvas>
    </div>

    <div id="dataWindow">
        <div id="dataDisplay"></div>
    </div>

    <script>
        const canvas = document.getElementById('myCanvas');
        const ctx = canvas.getContext('2d');
        let clickCount = 0; // クリック回数をカウントする変数

        // 三角形OO'Pと三角形PO'P'を組み合わせた平行四辺形を描画
        function drawParallelogram() {
            ctx.fillStyle = 'rgba(255, 0, 0, 0.3)'; // 赤色でハイライト
            ctx.beginPath();
            ctx.moveTo(100, 450);  // O
            ctx.lineTo(150, 500);  // P
            ctx.lineTo(200, 450);  // O'
            ctx.lineTo(150, 400);  // P'
            ctx.closePath();
            ctx.fill();
        }

        // 正方形を描画
        function drawSquare() {
            ctx.fillStyle = 'rgba(0, 0, 255, 0.3)'; // 青色でハイライト
            ctx.fillRect(250, 400, 100, 100); // x, y, width, height
        }

        // クリックイベント
        canvas.addEventListener('click', function(event) {
            const rect = canvas.getBoundingClientRect();
            const clickX = event.clientX - rect.left;
            const clickY = event.clientY - rect.top;

            clickCount++; // クリック回数を増加

            // クリック回数に応じた描画
            if (clickCount === 1) {
                clearCanvas();
                drawParallelogram();
            } else if (clickCount === 2) {
                clearCanvas();
                drawSquare();
            } else if (clickCount === 3) {
                clearCanvas(); // ハイライトを終了
                clickCount = 0; // クリックカウントをリセット
            }
        });

        // キャンバスをクリアする関数
        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
    </script>
</body>
</html>